@model _3dsGallery.DataLayer.DataBase.Gallery

@{
    ViewBag.Title = $"Edit \"{Model.name}\"";
}

<div class="section-white">
    <div class="container body-content">
        <h2>Edit "<span class="text-@Model.Style.value">@Model.name</span>"</h2>
    </div>
</div>


<div class="section-grey">
    <div class="container body-content">
        @using (Html.BeginForm("Edit", "Gallery", FormMethod.Post, new { @id = "mainForm" }))
        {
            @Html.AntiForgeryToken()

            <div class="form-horizontal section-separator-top">
                @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                @Html.HiddenFor(model => model.id)

                <div class="form-group">
                    @Html.LabelFor(model => model.name, "Name", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.name, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.name, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(model => model.info, "Description", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.EditorFor(model => model.info, new { htmlAttributes = new { @class = "form-control" } })
                        @Html.ValidationMessageFor(model => model.info, "", new { @class = "text-danger" })
                    </div>
                </div>
                <div class="form-group">
                    @Html.LabelFor(model => model.styleId, "Style", htmlAttributes: new { @class = "control-label col-md-2" })
                    <div class="col-md-10">
                        @Html.DropDownList("styleId", null, htmlAttributes: new { @class = "form-control" })
                        @Html.ValidationMessageFor(model => model.styleId, "", new { @class = "text-danger" })
                    </div>
                </div>

                <div class="form-group">
                    <div class="col-md-offset-2 col-md-10">
                        <input id="submitBtn" type="submit" value="Save" class="btn btn-default" />
                    </div>
                </div>
            </div>
        }
    </div>
</div>


@section scripts {
    @System.Web.Optimization.Scripts.Render("~/bundles/jqueryval")

    <script>
        $(function () {
            $('#mainForm').submit(function () {
                var form = $(this);

                if (!form.valid()) {
                    return; // Don't disable the button
                }

                $('#submitBtn').prop('disabled', true).val('Saving, please wait...');
            });
        });
    </script>
}
